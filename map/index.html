<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DC MAP Trial</title>
  </head>
  <style>
    #map {
      width: 100vw;
      height: 100vh;
    }
  </style>

  <body>
    <div id="map"></div>
    <script
      async
      defer
      src="https://maps.googleapis.com/maps/api/js?key=API KEY&callback=init"
      type="text/javascript"
    ></script>
    <script>
      var map;

      function init() {
        map = new google.maps.Map(document.getElementById("map"), {
          zoom: 6,
          center: { lat: 41.5, lng: -110 },
          mapTypeId: "terrain",
        });
        fetch("./hotspots_satscan.json")
          .then((response) => {
            return response.json();
          })
          .then((data) => {
            const transformedData = [];
            data.map((hotspot) => {
              const newData = {};
              newData["center"] = {
                lat: parseFloat(hotspot.centre[0]),
                lng: parseFloat(hotspot.centre[1]),
              };
              newData["radius"] = parseFloat(hotspot.radius);
              transformedData.push(newData);
            });

            transformedData.map((hotspot) => {
              var polygon = new google.maps.Circle({
                center: hotspot.center,
                radius: parseInt(hotspot.radius) * 100000,
                strokeColor: "#FF0000",
                strokeOpacity: 0.8,
                strokeWeight: 3,
                fillColor: "#FF0000",
                fillOpacity: 0.35,
              });
              polygon.setMap(map);
            });
          });
      }
    </script>
  </body>
</html>
